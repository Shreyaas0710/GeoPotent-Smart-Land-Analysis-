{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoPotent - Land Potential Analysis</title>

    <!-- Bootstrap 5 (Layout helpers only) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Main CSS -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

    {% block extra_css %}{% endblock %}
</head>

<body>

    <!-- ===== HEADER / NAVBAR ===== -->
    <header style="background: #ffffff; border-bottom: 1px solid rgba(0,0,0,0.08);">
        <div class="container nav-flex" style="padding: 14px 0; display: flex; align-items: center; justify-content: space-between;">

            <!-- Logo -->
            <a class="logo" href="{% url 'index' %}" style="font-size: 1.3rem; font-weight: 600; color: #2f6f4e; text-decoration: none;">
                <i class="fas fa-globe-asia"></i> Geo<span style="color:#68B851;">Potent</span>
            </a>

            <!-- Navigation -->
            <nav class="nav-links" style="display: flex; gap: 22px;">
                <a href="{% url 'index' %}" style="text-decoration:none; color:#374151;">Home</a>
                <a href="{% url 'analyze' %}" style="text-decoration:none; color:#374151;">Analyze Land</a>
                <a href="{% url 'builder_list' %}" style="text-decoration:none; color:#374151;">Find Builders</a>
                {% if user.is_authenticated %}
                    <a href="{% url 'dashboard' %}" style="text-decoration:none; color:#374151;">Dashboard</a>
                {% endif %}
            </nav>

            <!-- AUTH BUTTONS (OVERRIDABLE) -->
            {% block auth_buttons %}
            <div class="auth-buttons" style="display:flex; align-items:center; gap:12px;">
                {% if user.is_authenticated %}
                    <span style="color:#6b7280; font-size:0.9rem;">
                        {{ user.username }}
                    </span>
                    <a href="{% url 'logout' %}" class="btn btn-outline-success btn-sm">
                        Logout
                    </a>
                {% else %}
                    <a href="{% url 'login' %}" class="btn btn-outline-success btn-sm">
                        Login
                    </a>
                    <a href="{% url 'signup' %}" class="btn btn-success btn-sm">
                        Sign Up
                    </a>
                {% endif %}
            </div>
            {% endblock %}

        </div>
    </header>

    <!-- ===== MAIN CONTENT ===== -->
    <div class="main-content">

        <!-- Django Messages -->
        {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
            <div
                style="padding: 14px; border-radius: 8px; margin-bottom: 10px;
                background:
                {% if message.tags == 'success' %}
                    rgba(104,184,81,0.15); border:1px solid #68B851;
                {% elif message.tags == 'error' %}
                    rgba(255,0,0,0.1); border:1px solid red;
                {% else %}
                    rgba(0,0,0,0.05); border:1px solid rgba(0,0,0,0.1);
                {% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}
    </div>

    <!-- ===== FOOTER ===== -->
    <footer style="background:#ffffff; border-top:1px solid rgba(0,0,0,0.08); margin-top:60px;">
        <div class="container text-center py-3">
            <p style="margin:0; font-size:0.9rem; color:#6b7280;">
                &copy; 2024 GeoPotent. Unlocking Land Potential.
            </p>
        </div>
    </footer>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    {% block extra_js %}{% endblock %}
</body>

</html>
